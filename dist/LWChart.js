!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LWChart=e():t.LWChart=e()}(self,(function(){return(()=>{"use strict";var t={36:(t,e,i)=>{i.d(e,{Lf:()=>n,pp:()=>s,tq:()=>r,on:()=>c,S1:()=>l,FK:()=>v});var n="undefined"!=typeof window,a=(!0===n?window.navigator.userAgent:"").toLowerCase(),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t.length,n=[];for(i>=4&&(n=t.slice(0,4)),3===i&&(n=t.concat(t[1]));n.length<4;)n=n.concat(t);return n.map((function(t){return t*e}))},o=a.indexOf("android")>-1,h=/iphone|ipad|ipod|ios/.test(a),r=o||h,c=function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)},l=function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)},v=function(t){for(var e=t,i=0,n=0;null!==e;)i+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:i,left:n}}}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{i.d(n,{default:()=>a});var t=i(36);function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.el=void 0,this.elWidth=0,this.elHeight=0,this.options={},this.canvas=null,this.ctx=null,this.canvasWidth=0,this.canvasHeight=0,this.canvasPadding=[0],this.chartWidth=0,this.chartHeight=0,this.chartStartX=0,this.chartStartY=0,this.chartEndX=0,this.chartEndY=0,this.chartPadding=[0],this.titleBarHeight=0,this.mousePosition={x:-1,y:-1},this.mouseInCanvas=!1,this.dpi=1,this.el=t,this.mergeOptions(e),this.createCanvas(),this.options.addTouchEvent&&this.addStartEventHandler()}var n,a;return n=i,a=[{key:"createCanvas",value:function(){if(!1!==t.Lf){if(this.elWidth=this.el.offsetWidth,this.elHeight=this.el.offsetHeight,this.canvas=document.createElement("canvas"),this.canvas.innerHTML="您的浏览器不支持Canvas",this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("TWChart: get canvas 2D context fail");var e=this.ctx,i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,n=(window.devicePixelRatio||1)/i;n<1&&(n=1),this.dpi=n/i,this.el.innerHTML="",this.el.appendChild(this.canvas)}}},{key:"handleMove",value:function(e){if(this.canvas){if(t.tq){var i=(0,t.FK)(this.canvas),n=i.top,a=i.left,s=e.changedTouches[0],o=s.pageX,h=s.pageY;this.mousePosition={x:(o-a)*this.dpi,y:(h-n)*this.dpi}}else{var r=e||window.event;r.offsetX||0===r.offsetX?this.mousePosition={x:r.offsetX*this.dpi,y:r.offsetY*this.dpi}:(r.layerX||0===r.layerX)&&(this.mousePosition={x:r.layerX*this.dpi,y:r.layerY*this.dpi})}this.mouseInCanvas=!0,this.onMove()}}},{key:"handleMouseLeaveCanvas",value:function(){this.mouseInCanvas=!1,this.onMouseLeave(),this.removeMoveEventHandler()}},{key:"handleStart",value:function(t){this.handleMove(t),this.addMoveEventHandler()}},{key:"startEventHandler",value:function(e){var i=this;if(this.canvas){var n=t.on;"off"===e&&(n=t.S1),(t.tq?["touchstart"]:["mouseenter"]).map((function(t){n(i.canvas,t,i.handleStart.bind(i))}))}}},{key:"addStartEventHandler",value:function(){this.startEventHandler("on")}},{key:"removeStartEventHandler",value:function(){this.startEventHandler("off")}},{key:"moveEventHandler",value:function(e){var i=this;if(this.canvas){var n=t.S1;"on"===e&&(this.removeMoveEventHandler(),n=t.on);var a=t.tq?["touchmove","touchend"]:["mousemove"],s=t.tq?["touchend"]:["mouseleave"];a.map((function(t){n(i.canvas,t,i.handleMove.bind(i))})),s.map((function(t){n(i.canvas,t,i.handleMouseLeaveCanvas.bind(i))}))}}},{key:"addMoveEventHandler",value:function(){this.moveEventHandler("on")}},{key:"removeMoveEventHandler",value:function(){this.moveEventHandler("off")}},{key:"removeEventHandler",value:function(){this.removeStartEventHandler(),this.removeMoveEventHandler()}},{key:"mergeOptions",value:function(e){this.options=Object.assign({},{canvasPadding:[0],canvasBg:"#fff",title:"",titleStyle:void 0,titleBarHeight:30,chartPadding:[0],chartBg:"#fff",chartCursor:"pointer",addTouchEvent:!0},this.options,e);var i=(0,t.pp)(this.options.canvasPadding||[0]),n={size:18,font:"PingFangSC-Semibold PingFang SC",weight:"bold",x:i[3],y:i[0],color:"#333"},a=Object.assign({},n,this.options.titleStyle,null==e?void 0:e.titleStyle);this.options.titleStyle=a}},{key:"formatNumParam",value:function(t){return(t||0)*this.dpi}},{key:"drawText",value:function(t,e){if(this.ctx){var i=e.size,n=e.font,a=e.weight,s=e.color,o=e.x,h=e.y,r=e.maxWidth;i=i||16,n=n||"PingFangSC-Semibold PingFang SC",s=s||"#333",o=o||0,h=h||0,this.ctx.save(),this.ctx.font="".concat(a," ").concat(i,"px ").concat(n),this.ctx.fillStyle=s,this.ctx.fillText(t,o,h,r),this.ctx.restore()}}},{key:"drawLine",value:function(t,e,i,n,a,s,o){this.ctx&&(this.ctx.save(),o&&this.ctx.setLineDash(o),this.ctx.fillStyle=s,this.ctx.strokeStyle=s,this.ctx.lineWidth=a,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore())}},{key:"fixPixel",value:function(t){return(t=parseInt(t+""))%2!=0?t+1:t}},{key:"drawRect",value:function(t,e,i,n,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"default";this.ctx&&this.canvas&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t,e,i,n),this.ctx.isPointInPath(this.mousePosition.x,this.mousePosition.y)&&(this.canvas.style.cursor=s),this.ctx.fillStyle=a,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore())}},{key:"drawTitle",value:function(){var t=this,e=this.options,i=e.title,n=e.titleStyle;if(this.ctx&&i){var a=Object.assign({},n);["x","y","size","maxWidth"].map((function(e){if("number"==typeof a[e]){var i=a[e];a[e]=i*t.dpi}})),this.ctx.save(),this.ctx.textBaseline="top",this.ctx.textAlign="start",this.drawText(i,a),this.ctx.restore()}}},{key:"drawCanvasBg",value:function(){if(this.ctx){var t=this.options.canvasBg;t=t||"#fff",this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawRect(0,0,this.canvasWidth,this.canvasHeight,t)}}},{key:"drawChartBg",value:function(){if(this.ctx){var t=this.options.chartBg;t=t||"#fff",this.ctx.clearRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight),this.drawRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight,t,this.options.chartCursor)}}}],a&&e(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),i}()})(),n.default})()}));