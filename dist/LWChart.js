!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LWChart=e():t.LWChart=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"f",(function(){return h})),i.d(e,"i",(function(){return c})),i.d(e,"h",(function(){return u})),i.d(e,"g",(function(){return l})),i.d(e,"d",(function(){return f})),i.d(e,"c",(function(){return x})),i.d(e,"a",(function(){return p}));var n="undefined"!=typeof window,a=(!0===n?window.navigator.userAgent:"").toLowerCase(),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t.length,n=[];for(i>=4&&(n=t.slice(0,4)),3===i&&(n=t.concat(t[1]));n.length<4;)n=n.concat(t);return n.map((function(t){return t*e}))},r=a.indexOf("android")>-1,s=/iphone|ipad|ipod|ios/.test(a),h=r||s,c=function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)},u=function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)},l=function(){return performance?performance.now():Date.now()},f=function(t){for(var e=t,i=0,n=0;null!==e;)i+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:i,left:n}},v=function(t,e,i,n){var a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),r=a/(a+o),s=o/(a+o),h=n*(r=isNaN(r)?0:r),c=n*(s=isNaN(s)?0:s);return{previous:{x:e.x-h*(i.x-t.x),y:e.y-h*(i.y-t.y)},next:{x:e.x+c*(i.x-t.x),y:e.y+c*(i.y-t.y)}}},d=function(t,e,i){return Math.max(Math.min(t,i),e)},x=function(t,e){if(t.length<=0)return[];for(var i=t[0],n=[],a=0,o=t.length;a<o;a++){var r=t[a],s=a===o-1?r:t[a+1],h=v(i,r,s,.35),c=h.previous,u=h.next;n.push({point:r,control1:{x:d(c.x,e.left,e.right),y:d(c.y,e.top,e.bottom)},control2:{x:d(u.x,e.left,e.right),y:d(u.y,e.top,e.bottom)}}),i=r}return n},p=function(t,e,i,n,a){a>1&&(a=1);var o=1-a;return t*Math.pow(o,3)+3*e*a*Math.pow(o,2)+3*i*Math.pow(a,2)*o+n*Math.pow(a,3)}},,function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var n=i(0);function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=void 0,this.elWidth=0,this.elHeight=0,this.options={},this.canvas=null,this.ctx=null,this.canvasWidth=0,this.canvasHeight=0,this.canvasPadding=[0],this.chartWidth=0,this.chartHeight=0,this.chartStartX=0,this.chartStartY=0,this.chartEndX=0,this.chartEndY=0,this.chartPadding=[0],this.titleBarHeight=0,this.mousePosition={x:-1,y:-1},this.mouseInCanvas=!1,this.dpi=1,this.el=e,this.mergeOptions(i),this.createCanvas(),this.options.addTouchEvent&&this.addStartEventHandler()}var e,i,o;return e=t,(i=[{key:"createCanvas",value:function(){if(!1!==n.e){if(this.elWidth=this.el.offsetWidth,this.elHeight=this.el.offsetHeight,this.canvas=document.createElement("canvas"),this.canvas.innerHTML="您的浏览器不支持Canvas",this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("TWChart: get canvas 2D context fail");var t=this.ctx,e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=(window.devicePixelRatio||1)/e;i<1&&(i=1),this.dpi=i/e,this.el.innerHTML="",this.el.appendChild(this.canvas)}}},{key:"handleMove",value:function(t){if(this.canvas){if(n.f){var e=Object(n.d)(this.canvas),i=e.top,a=e.left,o=t.changedTouches[0],r=o.pageX,s=o.pageY;this.mousePosition={x:(r-a)*this.dpi,y:(s-i)*this.dpi}}else{var h=t||window.event;h.offsetX||0===h.offsetX?this.mousePosition={x:h.offsetX*this.dpi,y:h.offsetY*this.dpi}:(h.layerX||0===h.layerX)&&(this.mousePosition={x:h.layerX*this.dpi,y:h.layerY*this.dpi})}this.mouseInCanvas=!0,this.onMove()}}},{key:"handleMouseLeaveCanvas",value:function(){this.mouseInCanvas=!1,this.onMouseLeave(),this.removeMoveEventHandler()}},{key:"handleStart",value:function(t){this.handleMove(t),this.addMoveEventHandler()}},{key:"startEventHandler",value:function(t){var e=this;if(this.canvas){var i=n.i;"off"===t&&(i=n.h),(n.f?["touchstart"]:["mouseenter"]).map((function(t){i(e.canvas,t,e.handleStart.bind(e))}))}}},{key:"addStartEventHandler",value:function(){this.startEventHandler("on")}},{key:"removeStartEventHandler",value:function(){this.startEventHandler("off")}},{key:"moveEventHandler",value:function(t){var e=this;if(this.canvas){var i=n.h;"on"===t&&(this.removeMoveEventHandler(),i=n.i);var a=n.f?["touchmove","touchend"]:["mousemove"],o=n.f?["touchend"]:["mouseleave"];a.map((function(t){i(e.canvas,t,e.handleMove.bind(e))})),o.map((function(t){i(e.canvas,t,e.handleMouseLeaveCanvas.bind(e))}))}}},{key:"addMoveEventHandler",value:function(){this.moveEventHandler("on")}},{key:"removeMoveEventHandler",value:function(){this.moveEventHandler("off")}},{key:"removeEventHandler",value:function(){this.removeStartEventHandler(),this.removeMoveEventHandler()}},{key:"mergeOptions",value:function(t){var e={canvasPadding:[0],canvasBg:"#fff",title:"",titleStyle:void 0,titleBarHeight:30,chartPadding:[0],chartBg:"#fff",chartCursor:"pointer",addTouchEvent:!0};this.options=Object.assign({},e,this.options,t);var i=Object(n.b)(this.options.canvasPadding||[0]),a={size:18,font:"PingFangSC-Semibold PingFang SC",weight:"bold",x:i[3],y:i[0],color:"#333"},o=Object.assign({},a,this.options.titleStyle,null==t?void 0:t.titleStyle);this.options.titleStyle=o}},{key:"formatNumParam",value:function(t){return(t||0)*this.dpi}},{key:"drawText",value:function(t,e){if(this.ctx){var i=e.size,n=e.font,a=e.weight,o=e.color,r=e.x,s=e.y,h=e.maxWidth;i=i||16,n=n||"PingFangSC-Semibold PingFang SC",o=o||"#333",r=r||0,s=s||0,this.ctx.save(),this.ctx.font="".concat(a," ").concat(i,"px ").concat(n),this.ctx.fillStyle=o,this.ctx.fillText(t,r,s,h),this.ctx.restore()}}},{key:"drawLine",value:function(t,e,i,n,a,o,r){this.ctx&&(this.ctx.save(),r&&this.ctx.setLineDash(r),this.ctx.fillStyle=o,this.ctx.strokeStyle=o,this.ctx.lineWidth=a,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore())}},{key:"fixPixel",value:function(t){return(t=parseInt(t+""))%2!=0?t+1:t}},{key:"drawRect",value:function(t,e,i,n,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"default";this.ctx&&this.canvas&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t,e,i,n),this.ctx.isPointInPath(this.mousePosition.x,this.mousePosition.y)&&(this.canvas.style.cursor=o),this.ctx.fillStyle=a,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore())}},{key:"drawTitle",value:function(){var t=this,e=this.options,i=e.title,n=e.titleStyle;if(this.ctx&&i){var a=Object.assign({},n);["x","y","size","maxWidth"].map((function(e){if("number"==typeof a[e]){var i=a[e];a[e]=i*t.dpi}})),this.ctx.save(),this.ctx.textBaseline="top",this.ctx.textAlign="start",this.drawText(i,a),this.ctx.restore()}}},{key:"drawCanvasBg",value:function(){if(this.ctx){var t=this.options.canvasBg;t=t||"#fff",this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawRect(0,0,this.canvasWidth,this.canvasHeight,t)}}},{key:"drawChartBg",value:function(){if(this.ctx){var t=this.options.chartBg;t=t||"#fff",this.ctx.clearRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight),this.drawRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight,t,this.options.chartCursor)}}}])&&a(e.prototype,i),o&&a(e,o),t}()}]).default}));