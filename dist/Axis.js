!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Axis=i():t.Axis=i()}(self,(function(){return(()=>{"use strict";var t={186:(t,i,e)=>{e.d(i,{default:()=>s});var a=e(36);function n(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=void 0,this.elWidth=0,this.elHeight=0,this.options={},this.canvas=null,this.ctx=null,this.canvasWidth=0,this.canvasHeight=0,this.canvasPadding=[0],this.chartWidth=0,this.chartHeight=0,this.chartStartX=0,this.chartStartY=0,this.chartEndX=0,this.chartEndY=0,this.chartPadding=[0],this.titleBarHeight=0,this.mousePosition={x:-1,y:-1},this.mouseInCanvas=!1,this.dpi=1,this.el=i,this.mergeOptions(e),this.createCanvas(),this.options.addTouchEvent&&this.addStartEventHandler()}var i,e;return i=t,e=[{key:"createCanvas",value:function(){if(!1!==a.Lf){if(this.elWidth=this.el.offsetWidth,this.elHeight=this.el.offsetHeight,this.canvas=document.createElement("canvas"),this.canvas.innerHTML="您的浏览器不支持Canvas",this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("TWChart: get canvas 2D context fail");var t=this.ctx,i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,e=(window.devicePixelRatio||1)/i;e<1&&(e=1),this.dpi=e/i,this.el.innerHTML="",this.el.appendChild(this.canvas)}}},{key:"handleMove",value:function(t){if(this.canvas){if(a.tq){var i=(0,a.FK)(this.canvas),e=i.top,n=i.left,s=t.changedTouches[0],r=s.pageX,o=s.pageY;this.mousePosition={x:(r-n)*this.dpi,y:(o-e)*this.dpi}}else{var h=t||window.event;h.offsetX||0===h.offsetX?this.mousePosition={x:h.offsetX*this.dpi,y:h.offsetY*this.dpi}:(h.layerX||0===h.layerX)&&(this.mousePosition={x:h.layerX*this.dpi,y:h.layerY*this.dpi})}this.mouseInCanvas=!0,this.onMove()}}},{key:"handleMouseLeaveCanvas",value:function(){this.mouseInCanvas=!1,this.onMouseLeave(),this.removeMoveEventHandler()}},{key:"handleStart",value:function(t){this.handleMove(t),this.addMoveEventHandler()}},{key:"startEventHandler",value:function(t){var i=this;if(this.canvas){var e=a.on;"off"===t&&(e=a.S1),(a.tq?["touchstart"]:["mouseenter"]).map((function(t){e(i.canvas,t,i.handleStart.bind(i))}))}}},{key:"addStartEventHandler",value:function(){this.startEventHandler("on")}},{key:"removeStartEventHandler",value:function(){this.startEventHandler("off")}},{key:"moveEventHandler",value:function(t){var i=this;if(this.canvas){var e=a.S1;"on"===t&&(this.removeMoveEventHandler(),e=a.on);var n=a.tq?["touchmove","touchend"]:["mousemove"],s=a.tq?["touchend"]:["mouseleave"];n.map((function(t){e(i.canvas,t,i.handleMove.bind(i))})),s.map((function(t){e(i.canvas,t,i.handleMouseLeaveCanvas.bind(i))}))}}},{key:"addMoveEventHandler",value:function(){this.moveEventHandler("on")}},{key:"removeMoveEventHandler",value:function(){this.moveEventHandler("off")}},{key:"removeEventHandler",value:function(){this.removeStartEventHandler(),this.removeMoveEventHandler()}},{key:"mergeOptions",value:function(t){this.options=Object.assign({},{canvasPadding:[0],canvasBg:"#fff",title:"",titleStyle:void 0,titleBarHeight:30,chartPadding:[0],chartBg:"#fff",chartCursor:"pointer",addTouchEvent:!0},this.options,t);var i=(0,a.pp)(this.options.canvasPadding||[0]),e={size:18,font:"PingFangSC-Semibold PingFang SC",weight:"bold",x:i[3],y:i[0],color:"#333"},n=Object.assign({},e,this.options.titleStyle,null==t?void 0:t.titleStyle);this.options.titleStyle=n}},{key:"formatNumParam",value:function(t){return(t||0)*this.dpi}},{key:"drawText",value:function(t,i){if(this.ctx){var e=i.size,a=i.font,n=i.weight,s=i.color,r=i.x,o=i.y,h=i.maxWidth;e=e||16,a=a||"PingFangSC-Semibold PingFang SC",s=s||"#333",r=r||0,o=o||0,this.ctx.save(),this.ctx.font="".concat(n," ").concat(e,"px ").concat(a),this.ctx.fillStyle=s,this.ctx.fillText(t,r,o,h),this.ctx.restore()}}},{key:"drawLine",value:function(t,i,e,a,n,s,r){this.ctx&&(this.ctx.save(),r&&this.ctx.setLineDash(r),this.ctx.fillStyle=s,this.ctx.strokeStyle=s,this.ctx.lineWidth=n,this.ctx.beginPath(),this.ctx.moveTo(t,i),this.ctx.lineTo(e,a),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore())}},{key:"fixPixel",value:function(t){return(t=parseInt(t+""))%2!=0?t+1:t}},{key:"drawRect",value:function(t,i,e,a,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"default";this.ctx&&this.canvas&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t,i,e,a),this.ctx.isPointInPath(this.mousePosition.x,this.mousePosition.y)&&(this.canvas.style.cursor=s),this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore())}},{key:"drawTitle",value:function(){var t=this,i=this.options,e=i.title,a=i.titleStyle;if(this.ctx&&e){var n=Object.assign({},a);["x","y","size","maxWidth"].map((function(i){if("number"==typeof n[i]){var e=n[i];n[i]=e*t.dpi}})),this.ctx.save(),this.ctx.textBaseline="top",this.ctx.textAlign="start",this.drawText(e,n),this.ctx.restore()}}},{key:"drawCanvasBg",value:function(){if(this.ctx){var t=this.options.canvasBg;t=t||"#fff",this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawRect(0,0,this.canvasWidth,this.canvasHeight,t)}}},{key:"drawChartBg",value:function(){if(this.ctx){var t=this.options.chartBg;t=t||"#fff",this.ctx.clearRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight),this.drawRect(this.chartStartX,this.chartStartY,this.chartWidth,this.chartHeight,t,this.options.chartCursor)}}}],e&&n(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}()},36:(t,i,e)=>{e.d(i,{Lf:()=>a,pp:()=>s,tq:()=>h,on:()=>c,S1:()=>l,FK:()=>u});var a="undefined"!=typeof window,n=(!0===a?window.navigator.userAgent:"").toLowerCase(),s=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=t.length,a=[];for(e>=4&&(a=t.slice(0,4)),3===e&&(a=t.concat(t[1]));a.length<4;)a=a.concat(t);return a.map((function(t){return t*i}))},r=n.indexOf("android")>-1,o=/iphone|ipad|ipod|ios/.test(n),h=r||o,c=function(t,i,e){t&&i&&e&&t.addEventListener(i,e,!1)},l=function(t,i,e){t&&i&&t.removeEventListener(i,e,!1)},u=function(t){for(var i=t,e=0,a=0;null!==i;)e+=i.offsetTop,a+=i.offsetLeft,i=i.offsetParent;return{top:e,left:a}}},865:(t,i,e)=>{function a(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,a=new Array(i);e<i;e++)a[e]=t[e];return a}e.d(i,{pO:()=>n});var n=function(t,i,e,n,s,r,o){t.save(),t.translate(i,e),function(t,i,e,n){var s,r,o=(r=4,function(t){if(Array.isArray(t))return t}(s=n)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var a,n,s=[],r=!0,o=!1;try{for(e=e.call(t);!(r=(a=e.next()).done)&&(s.push(a.value),!i||s.length!==i);r=!0);}catch(t){o=!0,n=t}finally{try{r||null==e.return||e.return()}finally{if(o)throw n}}return s}}(s,r)||function(t,i){if(t){if("string"==typeof t)return a(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,i):void 0}}(s,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=o[0],c=o[1],l=o[2],u=o[3];t.beginPath(),t.arc(i-l,e-l,l,0,Math.PI/2),t.lineTo(u,e),t.arc(u,e-u,u,Math.PI/2,Math.PI),t.lineTo(0,h),t.arc(h,h,h,Math.PI,3*Math.PI/2),t.lineTo(i-c,0),t.arc(i-c,c,c,3*Math.PI/2,2*Math.PI),t.lineTo(i,e-c),t.closePath()}(t,n,s,r),t.fillStyle=o,t.fill(),t.restore()}}},i={};function e(a){var n=i[a];if(void 0!==n)return n.exports;var s=i[a]={exports:{}};return t[a](s,s.exports,e),s.exports}e.d=(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var a={};return(()=>{e.d(a,{default:()=>d});var t=e(186),i=e(36),n=e(865);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function r(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,a=new Array(i);e<i;e++)a[e]=t[e];return a}function o(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var a=c(t,i);if(a){var n=Object.getOwnPropertyDescriptor(a,i);return n.get?n.get.call(arguments.length<3?t:e):n.value}},h.apply(this,arguments)}function c(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=f(t)););return t}function l(t,i){return l=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},l(t,i)}function u(t,i){if(i&&("object"===s(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var d=function(t){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&l(t,i)}(v,t);var e,a,s,c,d=(s=v,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=f(s);if(c){var e=f(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return u(this,t)});function v(t,i){var e;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,v),(e=d.call(this,t,i)).xAxisData=[],e.xAxisHeight=0,e.yAxisData=[],e.yAxisWidth=0,e.minValue=0,e.maxValue=0,e}return e=v,(a=[{key:"initData",value:function(){var t=this,i=this.options,e=i.xAxisData,a=i.yAxisData,n=i.drawDataLength;e=e||[],a=a||[],n=n||7;var s=this.options.yAxisMinVal,r=this.options.yAxisMaxVal,o="number"==typeof s,h="number"==typeof r,c=h?r:0,l=o?s:999999;if(this.xAxisData=e.slice(-n),a.map((function(i,e){t.yAxisData[e]=i.slice(-(n||7)),t.yAxisData[e].map((function(t){t>c&&(c=t),t<l&&(l=t)}))})),l===c){var u=Math.max(5,.1*c);c+=u,l-=u}this.maxValue=h?r:c,this.minValue=o?s:l,this.afterInitData()}},{key:"drawAxis",value:function(){var t=this;if(this.ctx){var i=this.canvasPadding[3],e={startX:i+this.yAxisWidth,startY:this.chartEndY,endX:this.chartEndX,endY:this.chartEndY},a={startX:i+this.yAxisWidth,startY:this.chartStartY,endX:i+this.yAxisWidth,endY:this.chartEndY};this.ctx.clearRect(i+this.yAxisWidth,e.startY,this.chartWidth,this.xAxisHeight),this.drawRect(i+this.yAxisWidth,e.startY,this.chartWidth,this.xAxisHeight,this.options.canvasBg||"#fff"),this.ctx.clearRect(i,a.startY,this.yAxisWidth,this.chartHeight),this.drawRect(i,a.startY,this.yAxisWidth,this.chartHeight,this.options.canvasBg||"#fff");var s=this.options,r=s.axisStyle,o=s.xAxisLength,h=s.xAxisFormat,c=s.yAxisLength,l=s.yAxisFormat;o=o||10,c=c||10,c--;var u=Object.assign({},r);["lineWidth","lineHeight","size","splitXAxisWidth","splitXAxisRadius"].map((function(i){if("number"==typeof u[i]){var e=u[i];u[i]=e*t.dpi}}));var f=u.splitXAxisRadius,d=u.splitXAxisWidth,v=u.lineWidth,x=u.lineHeight,p=u.lineColor,y=u.splitXAxis,g=u.lineHeavyColor;if(f=f||this.formatNumParam(2),d=d||this.formatNumParam(2),v=v||this.formatNumParam(1),x=x||this.formatNumParam(1),p=p||"#666",g=g||"#666",this.options.showXAxisAuxiliaryLine&&!0!==y&&this.drawLine(e.startX,e.startY,e.endX,e.endY,x,p),this.options.showYAxisAuxiliaryLine&&this.drawLine(a.startX,a.startY,a.endX,a.endY,v,p),this.ctx.save(),this.ctx.textBaseline="top",this.ctx.textAlign="center",this.xAxisHeight>=0){var m,b=this.xAxisData.length,A=b-1,P=(b-1)/(o-1);P<2&&(P=1);for(var w=new Array(4).fill(f),S=null===(m=this.options.axisStyle)||void 0===m?void 0:m.splitXAxis,H=this.options.showXAxisVal,X=0;X<b;X++){var W=this.getPosX(A-X)-d/2;0===X?W=Math.min(W,this.chartEndX-d/2):X===b&&(W=Math.max(W,this.chartStartX-d/2));var E=this.xAxisData[A-X],O=!H||!H(E);if(H?O:X!==b-1&&X%P>=1){var k;if(!0!==(null===(k=this.options.axisStyle)||void 0===k?void 0:k.splitXAxis))continue;(0,n.pO)(this.ctx,W,e.startY,d,x,w,p)}else{S&&(0,n.pO)(this.ctx,W,e.startY,d,x,w,g),E="function"==typeof h?h(E):E,W=this.getPosX(A-X);var Y=this.chartEndY+x+10*this.dpi;this.ctx.font="normal ".concat(u.size,"px ").concat(u.font);var j=this.ctx.measureText(E).width/2;0===X&&(W=Math.min(W,this.canvasWidth-j)),X===A&&(W=Math.max(W,j)),this.drawText(E,{x:W,y:Y,color:u.color,size:u.size,font:u.font,weight:"normal"})}}}if(this.ctx.textBaseline="middle",this.ctx.textAlign="right",this.yAxisWidth>=0)for(var C=(this.maxValue-this.minValue)/c,M=0;M<=c;M++){var R=C*M+this.minValue,L="function"==typeof l?l(R):R+"",T=this.chartStartX-10*this.dpi,B=this.getPosY(R);this.drawText(L,{x:T,y:B,color:u.color,size:u.size,font:u.font,weight:"normal",maxWidth:this.yAxisWidth-10*this.dpi}),M>0&&this.drawLine(e.startX,B,e.endX,B,u.lineWidth||1,u.lineColor||"#666")}this.ctx.restore()}}},{key:"initSize",value:function(){if(this.canvas&&i.Lf){this.canvas.width=this.canvasWidth=this.elWidth*this.dpi,this.canvas.height=this.canvasHeight=this.elHeight*this.dpi,this.canvas.style.width=this.elWidth+"px",this.canvas.style.height=this.elHeight+"px";var t=this.options,e=t.title,a=t.titleBarHeight,n=t.canvasPadding,s=t.chartPadding,o=t.yAxisWidth,h=t.xAxisHeight;n=n||[0],s=s||[0],a=this.formatNumParam(a),o=this.formatNumParam(o),h=this.formatNumParam(h),this.xAxisHeight=h,this.yAxisWidth=o,this.titleBarHeight=e?a:0,this.canvasPadding=(0,i.pp)(n,this.dpi);var c=(v=this.canvasPadding,x=4,function(t){if(Array.isArray(t))return t}(v)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var a,n,s=[],r=!0,o=!1;try{for(e=e.call(t);!(r=(a=e.next()).done)&&(s.push(a.value),!i||s.length!==i);r=!0);}catch(t){o=!0,n=t}finally{try{r||null==e.return||e.return()}finally{if(o)throw n}}return s}}(v,x)||function(t,i){if(t){if("string"==typeof t)return r(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,i):void 0}}(v,x)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],u=c[1],f=c[2],d=c[3];this.chartPadding=(0,i.pp)(s,this.dpi),this.chartWidth=this.canvasWidth-d-u-o,this.chartHeight=this.canvasHeight-this.titleBarHeight-l-f-h,this.chartStartX=d+o,this.chartStartY=l+a,this.chartEndX=this.chartStartX+this.chartWidth,this.chartEndY=this.chartStartY+this.chartHeight}var v,x}},{key:"mergeOptions",value:function(t){this.options=Object.assign({},{drawDataLength:7,xAxisHeight:30,xAxisData:[],xAxisLength:10,xAxisFormat:void 0,showXAxisAuxiliaryLine:!0,showYAxisAuxiliaryLine:!0,yAxisWidth:30,yAxisData:[],yAxisLength:10,yAxisFormat:void 0,axisStyle:void 0,showXAxisVal:void 0},this.options,t);var i=Object.assign({},{lineColor:"#666",lineWidth:1,lineHeight:1,font:"PingFangSC-Semibold PingFang SC",size:10,color:"#666",splitXAxis:!1,lineHeavyColor:"#666",splitXAxisWidth:2,splitXAxisRadius:2},this.options.axisStyle,null==t?void 0:t.axisStyle);this.options.axisStyle=i,h(f(v.prototype),"mergeOptions",this).call(this,t)}},{key:"getPosY",value:function(t){var i=this.chartEndY-this.chartPadding[2],e=this.chartHeight-this.chartPadding[0]-this.chartPadding[2],a=this.maxValue-this.minValue;return i-e*((t-this.minValue)/a)}},{key:"getPosX",value:function(t){return this.chartStartX+this.chartPadding[3]+(this.chartWidth-this.chartPadding[1]-this.chartPadding[3])*(t/(this.xAxisData.length-1))}}])&&o(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),v}(t.default)})(),a.default})()}));